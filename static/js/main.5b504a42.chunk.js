(this.webpackJsonpkasperskiy=this.webpackJsonpkasperskiy||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(29),o=n.n(r),i=n(9),s=n(6),l=n.n(s),u=n(12),b=n(4),j=function(e,t){return Math.floor(Math.random()*(t-e))+e},d=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},m=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},h=(n(38),n(11)),O=(n(39),n(0)),f=function(e){var t=e.type,n=void 0===t?"button":t,a=e.children,c=e.template,r=void 0===c?"default":c,o=e.onClick,i=e.disabled,s=void 0!==i&&i;return Object(O.jsx)("button",{className:"button button__".concat(r),type:n,onClick:o,disabled:s,children:a})},v=function(e){var t=e.id,n=e.title,a=e.authors,c=e.onDelete,r=(e.pagesCount,e.cover),o=void 0===r?"":r,i=a?a.map((function(e){return Object(O.jsx)("h3",{className:"book__author",children:Object(O.jsxs)(h.b,{to:"/authors/".concat(e.id),children:[e.firstName," ",e.lastName]})},e.id)})):null;return Object(O.jsxs)("div",{className:"book",children:[Object(O.jsx)(h.b,{to:"/books/".concat(t),children:Object(O.jsx)("img",{className:"book__cover",src:o||"/icons/lost-items.svg",alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043a\u043d\u0438\u0433\u0438 ".concat(n)})}),Object(O.jsx)("div",{className:"book__authors",children:i}),Object(O.jsx)("h2",{className:"book__title",children:Object(O.jsx)(h.b,{to:"/books/".concat(t),children:n})}),Object(O.jsx)(h.b,{to:"/edit/".concat(t),children:Object(O.jsx)("div",{className:"book__side-btn book__side-btn_edit",style:{backgroundImage:"url('/icons/edit.svg')"}})}),Object(O.jsx)("div",{className:"book__side-btn book__side-btn_delete",style:{backgroundImage:"url('/icons/trash.svg')"},children:Object(O.jsx)(f,{onClick:function(){return c(t)}})})]})},x=(n(49),function(e){var t=e.to,n=e.children,a=e.template,c=void 0===a?"default":a;return Object(O.jsx)(h.b,{to:t,className:"link link__".concat(c),children:n})}),p=(n(50),function(e){var t=e.text;return Object(O.jsxs)("div",{className:"placeholder",children:[Object(O.jsx)("img",{src:"/icons/lost-items.svg",alt:"Placeholder icon"}),Object(O.jsx)("p",{children:t})]})}),k=(n(51),function(e){var t=e.bookList,n=e.setBooks,a=function(e){var a=t.filter((function(t){return t.id!==e}));m("storedBooks",a),n(a)},c=t.length>0?t.map((function(e){return Object(O.jsx)(v,Object(i.a)({onDelete:a},e),e.id)})):Object(O.jsx)(p,{text:"The library is empty"});return Object(O.jsxs)("section",{className:"book-list",children:[Object(O.jsx)("div",{className:"book-list__wrapper",children:c}),Object(O.jsx)(x,{to:"/add",template:"buttonLike",children:"Add new book"})]})}),g=n(13),N=(n(52),function(e){var t=e.books,n=e.setBooks,c=Object(a.useState)(""),r=Object(b.a)(c,2),o=r[0],i=r[1];Object(a.useEffect)((function(){var e=d("currentSort")||"title";i(e)}),[]);var s=function(e){var a=t;a="title"===e?a.length>1?Object(g.a)(a).sort((function(e,t){return e.title.localeCompare(t.title)})):a:a.length>1?Object(g.a)(a).sort((function(e,t){var n=e.publicationYear?new Date(e.publicationYear):new Date,a=t.publicationYear?new Date(t.publicationYear):new Date;return n.getTime()-a.getTime()})):a,n(a),i(e),m("currentSort",e),m("storedBooks",a)};return Object(O.jsxs)("div",{className:"sort",children:[Object(O.jsx)("p",{className:"sort__label",children:"Sort by:"}),Object(O.jsxs)("div",{className:"sort__controls",children:[Object(O.jsx)(f,{template:"sortButton",onClick:function(){return s("title")},disabled:"title"===o,children:"Title"}),Object(O.jsx)(f,{template:"sortButton",onClick:function(){return s("publicationYear")},disabled:"publicationYear"===o,children:"Publication Year"})]})]})}),_=(n(53),function(){return Object(O.jsx)("div",{className:"spinner"})}),C=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=setTimeout((function(){return e(clearTimeout(n))}),1e3)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=d("storedBooks"),e.abrupt("return",t||[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=(n(54),function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(b.a)(r,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,w();case 3:t=e.sent,s(t),c(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("h1",{className:"main__title",children:"Library"}),Object(O.jsx)(N,{books:i,setBooks:s}),n?Object(O.jsx)(_,{}):Object(O.jsx)(k,{bookList:i,setBooks:s})]})})}),T=n(2),S=n(31),B=n(21),D=n(22),Y=(n(55),function(e){var t=e.labelText,n=e.value,a=e.onChange,c=e.name,r=e.placeholder,o=e.disabled,i=e.max;return Object(O.jsxs)("div",{className:"text-input",children:[Object(O.jsx)("label",{htmlFor:c,children:t}),Object(O.jsx)("input",{type:"text",name:c,id:c,value:n||"",onChange:function(e){e.target.value&&e.target.value.length>i||a(e.target.value,c)},placeholder:r,disabled:o})]})}),A=(n(56),function(e){var t=e.firstName,n=void 0===t?null:t,c=e.lastName,r=void 0===c?null:c,o=e.id,i=void 0===o?null:o,s=e.onChange,l=e.onDelete,u=e.disabled,j=void 0!==u&&u,d=Object(a.useState)(n),m=Object(b.a)(d,2),h=m[0],v=m[1],x=Object(a.useState)(r),p=Object(b.a)(x,2),k=p[0],g=p[1];Object(a.useEffect)((function(){if((null===h||void 0===h?void 0:h.trim())&&(null===k||void 0===k?void 0:k.trim())){var e=Object(D.a)();s({id:e,firstName:h,lastName:k})}}),[h,k]);return Object(O.jsxs)("div",{className:"author-creator-row",children:[Object(O.jsx)("div",{className:"author-creator-row__column",children:Object(O.jsx)(Y,{labelText:"First name",value:h,name:"firstName",onChange:v,disabled:j,max:20})}),Object(O.jsx)("div",{className:"author-creator-row__column",children:Object(O.jsx)(Y,{labelText:"Last name",value:k,name:"lastName",onChange:g,disabled:j,max:20})}),j?Object(O.jsx)("div",{className:"author-creator-row__delete-icon",children:Object(O.jsx)(f,{onClick:function(){l(i)}})}):null]})}),I=(n(57),function(e){var t,n,c=e.authors,r=(e.name,e.onChange),o=Object(a.useState)([]),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)(c[c.length-1]),j=Object(b.a)(u,2),d=j[0],m=j[1];Object(a.useEffect)((function(){l([].concat(Object(g.a)(c),[null]))}),[c]);var h=function(e){m(e)},v=function(e){var t=c.filter((function(t){return t.id!==e}));r(t,"authors")},x=s?s.map((function(e,t){var n=e&&e.firstName&&e.lastName;return Object(O.jsx)(A,{id:e&&e.id||t,firstName:e&&e.firstName,lastName:e&&e.lastName,onChange:h,onDelete:v,disabled:!!n},e&&e.id||t)})):null;return Object(O.jsxs)("div",{className:"author-creator",children:[x,Object(O.jsx)("div",{className:"author-creator__add",children:Object(O.jsx)(f,{disabled:!(!d||(null===(t=d.firstName)||void 0===t?void 0:t.trim())&&(null===(n=d.lastName)||void 0===n?void 0:n.trim())),onClick:function(){var e=Object(g.a)(s);e[e.length-1]=d,e.filter((function(e){return e})),r(e,"authors")},children:"Add author"})})]})}),E=n(32),L=n.n(E),M=(n(66),n(67),new Date("1800-01-01").getTime()),P=function(e){var t=e.value,n=e.labelText,a=e.onChange,c=e.name;return Object(O.jsxs)("div",{className:"day-picker",children:[Object(O.jsx)("label",{children:n}),Object(O.jsx)(L.a,{onDayChange:function(e){if(e)return e.getTime()>M?a(e,c):a(new Date("1800-01-01"),c)},value:t,classNames:{container:"day-picker__wrapper",overlayWrapper:"",overlay:""}})]})},F=(n(68),function(e){var t=e.labelText,n=e.value,c=e.name,r=e.onChange,o=Object(a.useState)(!1),i=Object(b.a)(o,2),s=(i[0],i[1]),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FileReader,a=t.target.files[0],s(!0),n.onloadend=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.result,r(t,c),s(!1);case 3:case"end":return e.stop()}}),e)}))),n.readAsDataURL(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"image-uploader",children:[Object(O.jsx)("input",{className:"image-uploader__input",type:"file",name:c,onChange:j,id:c}),Object(O.jsx)("label",{htmlFor:c,className:"image-uploader__label","aria-label":t,children:n&&Object(O.jsx)("img",{src:n,alt:"Book cover preview"})})]})}),J=function(e){var t=e.name,n=e.labelText,a=e.value,c=e.onChange,r=e.placeholder,o=e.min,i=e.max,s=e.step,l=void 0===s?1:s,u=e.disabled;return Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:t,children:n}),Object(O.jsx)("input",{type:"number",inputMode:"numeric",min:o,max:i,step:l,name:t,id:t,value:a||"",onChange:function(e){c(e.target.value,t)},placeholder:r,disabled:u})]})},R=(n(69),["title","authors","pagesCount"]),U={id:null,title:null,authors:[],pagesCount:null,publisherName:null,publicationYear:void 0,releaseDate:void 0,isbn:null,cover:null},q=function(e){var t=e.bookToMutate,n=e.editBookId,c=void 0===n?null:n,r=Object(T.f)(),o=Object(a.useState)([]),s=Object(b.a)(o,2),l=s[0],u=s[1],h=Object(a.useState)(t||U),v=Object(b.a)(h,2),x=v[0],p=v[1],k=Object(a.useState)(!1),N=Object(b.a)(k,2),_=N[0],C=N[1];Object(a.useEffect)((function(){var e=d("storedBooks");u(e||[])}),[]);var w=function(e,t){C(!1),p((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(B.a)({},t,e))}))},y=function(e){m("storedBooks",e),r.push("/")};return Object(O.jsx)("section",{className:"book-form",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("h1",{children:"Add new book"}),Object(O.jsxs)("div",{className:"book-form__wrapper",children:[Object(O.jsx)("div",{className:"book-form__cover",children:Object(O.jsx)(F,{labelText:"Upload cover",value:x.cover,name:"cover",onChange:w})}),Object(O.jsxs)("div",{className:"book-form__info",children:[Object(O.jsx)(Y,{value:x.title,labelText:"Title*",name:"title",onChange:w,max:30}),Object(O.jsx)(Y,{value:x.publisherName,labelText:"Publisher Name",name:"publisherName",onChange:w,max:30}),Object(O.jsxs)("div",{className:"book-form__authors",children:[Object(O.jsx)("span",{className:"book-form__authors-title",children:"Authors*"}),Object(O.jsx)(I,{authors:x.authors,name:"authors",onChange:w})]}),Object(O.jsx)(J,{labelText:"Pages count*",value:x.pagesCount,name:"pagesCount",onChange:w,min:1,max:1e4}),Object(O.jsx)(P,{labelText:"Publication year",name:"publicationYear",value:x.publicationYear,onChange:w}),Object(O.jsx)(P,{labelText:"Release date",name:"releaseDate",value:x.releaseDate,onChange:w}),_&&Object(O.jsx)("div",{className:"book-form__error",children:"One of the required fields(*) is empty"}),Object(O.jsx)("div",{className:"book-form__submit",children:Object(O.jsx)(f,{onClick:function(){(function(){var e,t=!1,n=Object(S.a)(R);try{for(n.s();!(e=n.n()).done;){var a=e.value,c=x[a];if(!c||Array.isArray(c)&&0===c.length){t=!0;break}}}catch(r){n.e(r)}finally{n.f()}return C(t),t})()||(c?function(){var e=Object(i.a)({},x),t=l.map((function(t){return t.id===c?Object(i.a)({},e):t}));y(t)}():function(){var e=Object(i.a)(Object(i.a)({},x),{},{id:Object(D.a)(),isbn:"978-5-".concat(j(10,1e3),"-").concat(j(1e5,2e5),"-").concat(j(0,9))}),t=[].concat(Object(g.a)(l),[e]);y(t)}())},disabled:_,children:"Submit"})})]})]})]})})},W=function(e){var t=e.match.params.id,n=d("storedBooks"),a=n&&n.length>0?n.filter((function(e){return e.id===t}))[0]:null;return Object(O.jsx)("div",{children:Object(O.jsx)(q,{bookToMutate:a,editBookId:t})})},z=function(){return Object(O.jsx)(h.a,{children:Object(O.jsxs)(T.c,{children:[Object(O.jsx)(T.a,{path:"/",exact:!0,children:Object(O.jsx)(y,{})}),Object(O.jsx)(T.a,{path:"/add",exact:!0,render:function(e){return Object(O.jsx)(W,Object(i.a)({},e))}}),Object(O.jsx)(T.a,{path:"/edit/:id",exact:!0,render:function(e){return Object(O.jsx)(W,Object(i.a)({},e))}})]})})},G=function(){return Object(O.jsx)("main",{children:Object(O.jsx)(z,{})})};n(70),n(71);o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(G,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.5b504a42.chunk.js.map